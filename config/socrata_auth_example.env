# Socrata API Authentication Configuration
# Copy this file to .env and fill in your actual credentials

# =============================================================================
# LA CITY OPEN DATA - SOCRATA API CONFIGURATION
# =============================================================================

# Socrata API Domain (LA City Open Data Portal)
SOCRATA_DOMAIN="data.lacity.org"

# App Token (Recommended for higher rate limits)
# Sign up at: https://dev.socrata.com/foundry/data.lacity.org/yv23-pmwf
# Without app token: 1,000 requests/hour
# With app token: 10,000 requests/hour
SOCRATA_APP_TOKEN="your_socrata_app_token_here"

# Basic Authentication (Optional but recommended for authenticated access)
# Uses your Socrata account credentials
SOCRATA_USERNAME="your_socrata_username@example.com"
SOCRATA_PASSWORD="your_socrata_password_here"

# =============================================================================
# PERMITS DATASET CONFIGURATION
# =============================================================================

# Primary Dataset: LA Building and Safety Permits
PERMITS_DATASET_ID="yv23-pmwf"

# Alternative Dataset (if primary is unavailable)
PERMITS_DATASET_ALT="nbyu-2ha9"

# =============================================================================
# ETL PIPELINE CONFIGURATION
# =============================================================================

# Database Configuration
DATABASE_PATH="./data/dealgenie.db"

# API Request Configuration
BATCH_SIZE=5000                    # Records per API request (max: 50,000)
RATE_LIMIT_DELAY=1.0              # Seconds between requests
MAX_RETRIES=3                     # Retry attempts for failed requests
REQUEST_TIMEOUT=30                # Seconds before request timeout

# Data Processing Configuration
ENABLE_DATA_VALIDATION=true      # Enable comprehensive data validation
ENABLE_GEOCODING=true            # Enable address geocoding
ENABLE_CLUSTERING=true           # Enable project clustering

# =============================================================================
# CLUSTERING CONFIGURATION
# =============================================================================

# DBSCAN Parameters
SPATIAL_EPSILON=100              # Meters for spatial clustering
TEMPORAL_WINDOW=365              # Days for temporal clustering
MIN_SAMPLES=2                    # Minimum permits per cluster

# Business Logic
MEGAPROJECT_THRESHOLD=10000000   # $10M threshold for megaprojects
MIN_PROJECT_VALUE=1000           # $1K minimum project value

# =============================================================================
# SUPPLY FEATURES CONFIGURATION  
# =============================================================================

# Geographic Buffer Distances (miles)
BUFFER_DISTANCES="1.0,2.0,3.0,5.0"

# Velocity Analysis Windows (months)
VELOCITY_WINDOWS="3,6,12"

# Feature Output Levels
ENABLE_PARCEL_FEATURES=true
ENABLE_BLOCK_GROUP_FEATURES=true
ENABLE_COUNCIL_DISTRICT_FEATURES=true

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Logging Configuration
LOG_LEVEL="INFO"                 # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE="./logs/permits_pipeline.log"
ENABLE_CONSOLE_LOGGING=true

# Monitoring Configuration
ENABLE_PERFORMANCE_METRICS=true
ENABLE_DATA_QUALITY_METRICS=true
ALERT_EMAIL=""                   # Email for critical alerts (optional)

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development Mode (enables additional debugging)
DEBUG_MODE=false

# Test Data Limits (for development)
DEV_RECORD_LIMIT=1000           # Limit records in development mode
ENABLE_SAMPLE_DATA=false        # Use sample data instead of API

# Cache Configuration
ENABLE_CACHING=true
CACHE_DURATION=3600             # Seconds (1 hour)

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT SECURITY CONSIDERATIONS:
# 
# 1. NEVER commit .env files to version control
# 2. Use environment-specific .env files (.env.dev, .env.prod, etc.)
# 3. Rotate API credentials regularly
# 4. Use secure storage for production credentials (AWS Secrets Manager, etc.)
# 5. Consider using API key rotation for long-running processes
#
# To get Socrata credentials:
# 1. Visit: https://opendata.socrata.com/signup
# 2. Create account and verify email
# 3. Go to: https://dev.socrata.com/foundry/data.lacity.org/yv23-pmwf
# 4. Click "Sign up for an app token"
# 5. Fill out application details
# 6. Copy app token to SOCRATA_APP_TOKEN above
#
# Rate Limits:
# - Without authentication: 1,000 requests/hour
# - With app token only: 10,000 requests/hour  
# - With app token + basic auth: 10,000 requests/hour (more stable)
#
# For production deployments, consider:
# - Using service accounts for API access
# - Implementing credential rotation policies
# - Monitoring API usage against rate limits
# - Setting up alerting for API quota exhaustion